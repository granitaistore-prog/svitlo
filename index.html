<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–≤—ñ—Ç–ª–æ –Ñ | –ö–∞—Ä—Ç–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å —Å–≤—ñ—Ç–ª–∞ –≤ –£–∫—Ä–∞—ó–Ω—ñ</title>
    <meta name="description" content="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –≤ –£–∫—Ä–∞—ó–Ω—ñ. –†–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ, –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø—Ä–∞—Ü—é—î –æ—Ñ–ª–∞–π–Ω.">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-192.png" type="image/png">
    <meta name="theme-color" content="#1a365d">
    <!-- iOS –º–µ—Ç–∞—Ç–µ–≥–∏ –¥–ª—è PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–°–≤—ñ—Ç–ª–æ –Ñ">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body class="dark-theme">
    <div class="app-container">
        <header class="app-header">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo-icon">üí°</div>
                    <h1>–°–≤—ñ—Ç–ª–æ –Ñ</h1>
                </div>
                <div class="header-controls">
                    <button id="locationBtn" class="btn-icon" title="–ó–Ω–∞–π—Ç–∏ –º–æ—î –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è">
                        üìç
                    </button>
                    <button id="themeToggle" class="btn-icon" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">
                        üåô
                    </button>
                    <button id="refreshBtn" class="btn-icon" title="–û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ">
                        üîÑ
                    </button>
                </div>
            </div>
            
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="–ü–æ—à—É–∫ –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É...">
                <button id="searchBtn" class="btn-primary">–ü–æ—à—É–∫</button>
            </div>
            
            <div class="status-container">
                <div class="status-indicator" id="globalStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</span>
                </div>
                <div class="last-update" id="lastUpdate">
                    –û–Ω–æ–≤–ª–µ–Ω–æ: --:--:--
                </div>
            </div>
        </header>

        <main class="app-main">
            <div class="map-container">
                <div id="map"></div>
                <div class="map-controls">
                    <div class="legend">
                        <h3>–õ–µ–≥–µ–Ω–¥–∞ –∫–∞—Ä—Ç–∏:</h3>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #ef4444;"></span>
                            <span>–ù–µ–º–∞—î —Å–≤—ñ—Ç–ª–∞ üî¥</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #f59e0b;"></span>
                            <span>–ú–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è üü°</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #10b981;"></span>
                            <span>–Ñ —Å–≤—ñ—Ç–ª–æ üü¢</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #3b82f6;"></span>
                            <span>–ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º üìÖ</span>
                        </div>
                    </div>
                    <div class="zoom-controls">
                        <button id="zoomIn" class="btn-icon">+</button>
                        <button id="zoomOut" class="btn-icon">-</button>
                    </div>
                </div>
            </div>
            
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h2>–û–±–ª–∞—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏</h2>
                    <div class="filters">
                        <select id="regionFilter" class="filter-select">
                            <option value="all">–í—Å—ñ –æ–±–ª–∞—Å—Ç—ñ</option>
                            <option value="kyiv">–ö–∏—ó–≤ —Ç–∞ –æ–±–ª–∞—Å—Ç—å</option>
                            <option value="lviv">–õ—å–≤—ñ–≤—Å—å–∫–∞</option>
                            <option value="kharkiv">–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞</option>
                            <option value="odesa">–û–¥–µ—Å—å–∫–∞</option>
                            <option value="dnipro">–î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞</option>
                            <option value="donetsk">–î–æ–Ω–µ—Ü—å–∫–∞</option>
                            <option value="zaporizhzhia">–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∞</option>
                            <option value="vinnytsia">–í—ñ–Ω–Ω–∏—Ü—å–∫–∞</option>
                            <option value="zhytomyr">–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞</option>
                            <option value="poltava">–ü–æ–ª—Ç–∞–≤—Å—å–∫–∞</option>
                            <option value="cherkasy">–ß–µ—Ä–∫–∞—Å—å–∫–∞</option>
                            <option value="chernihiv">–ß–µ—Ä–Ω—ñ–≥—ñ–≤—Å—å–∫–∞</option>
                            <option value="sumy">–°—É–º—Å—å–∫–∞</option>
                            <option value="rivne">–†—ñ–≤–Ω–µ–Ω—Å—å–∫–∞</option>
                            <option value="khmelnytskyi">–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∞</option>
                            <option value="ternopil">–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞</option>
                            <option value="ivano-frankivsk">–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∞</option>
                            <option value="kherson">–•–µ—Ä—Å–æ–Ω—Å—å–∫–∞</option>
                            <option value="mykolaiv">–ú–∏–∫–æ–ª–∞—ó–≤—Å—å–∫–∞</option>
                            <option value="chernivtsi">–ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–∞</option>
                            <option value="zakarpattia">–ó–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∞</option>
                            <option value="volyn">–í–æ–ª–∏–Ω—Å—å–∫–∞</option>
                            <option value="luhansk">–õ—É–≥–∞–Ω—Å—å–∫–∞</option>
                        </select>
                        
                        <select id="statusFilter" class="filter-select">
                            <option value="all">–í—Å—ñ —Å—Ç–∞—Ç—É—Å–∏</option>
                            <option value="no_power">–ù–µ–º–∞—î —Å–≤—ñ—Ç–ª–∞</option>
                            <option value="possible">–ú–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</option>
                            <option value="has_power">–Ñ —Å–≤—ñ—Ç–ª–æ</option>
                            <option value="scheduled">–ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º</option>
                        </select>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h2>–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω</h2>
                    <div class="current-status" id="currentStatus">
                        <div class="status-card">
                            <div class="status-header">
                                <h3>–í–∞—à —Ä–µ–≥—ñ–æ–Ω:</h3>
                                <span class="status-badge" id="userRegionStatus">–í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è...</span>
                            </div>
                            <p id="userLocationInfo">–í–∏–∑–Ω–∞—á–∞—î–º–æ –≤–∞—à–µ –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è...</p>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h2>–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h2>
                    <div class="details-container" id="regionDetails">
                        <p class="empty-details">–û–±–µ—Ä—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å –Ω–∞ –∫–∞—Ä—Ç—ñ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó</p>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <div class="stats-container">
                        <div class="stat-item">
                            <span class="stat-label">–û–±–ª–∞—Å—Ç–µ–π –±–µ–∑ —Å–≤—ñ—Ç–ª–∞:</span>
                            <span class="stat-value" id="statNoPower">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ó –≥—Ä–∞—Ñ—ñ–∫–æ–º –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:</span>
                            <span class="stat-value" id="statScheduled">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ó—ñ —Å–≤—ñ—Ç–ª–æ–º:</span>
                            <span class="stat-value" id="statHasPower">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–í—Å—å–æ–≥–æ –æ–±–ª–∞—Å—Ç–µ–π:</span>
                            <span class="stat-value" id="statTotal">24</span>
                        </div>
                    </div>
                </div>
                
                <div class="install-prompt" id="installPrompt">
                    <p>–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–¥–æ—Å—Ç—É–ø—É</p>
                    <button id="installBtn" class="btn-primary">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                </div>
            </aside>
        </main>

        <footer class="app-footer">
            <div class="footer-content">
                <p>–î–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏ –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª (–£–∫—Ä–µ–Ω–µ—Ä–≥–æ, –û–±–ª–µ–Ω–µ—Ä–≥–æ)</p>
                <p>¬© 2023 –°–≤—ñ—Ç–ª–æ –Ñ | –í–µ–±-–¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó</p>
                <div class="update-info">
                    <span>–ù–∞—Å—Ç—É–ø–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: <span id="nextUpdate">2:00</span></span>
                    <button id="forceUpdate" class="btn-small">–û–Ω–æ–≤–∏—Ç–∏ –∑–∞—Ä–∞–∑</button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
    
    <!-- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è Service Worker –¥–ª—è PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('–ü–æ–º–∏–ª–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó ServiceWorker: ', error);
                    });
            });
        }
        
        // –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ—ó –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').style.display = 'block';
        });
        
        document.getElementById('installBtn').addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≥–æ–¥–∏–≤—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫');
                    }
                    deferredPrompt = null;
                    document.getElementById('installPrompt').style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>
